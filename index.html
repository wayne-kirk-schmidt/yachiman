<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>10,000 ARROWS</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=EB+Garamond:ital,wght@0,400;1,400&family=Satisfy&display=swap" rel="stylesheet">

  <!-- Shared hall styling -->
  <link rel="stylesheet" href="assets/haiku.css">
  <link rel="stylesheet" href="assets/haiku-index.css">

  <!-- Data -->
  <script src="assets/manifest.js"></script>
  <script src="assets/tags.js"></script>
</head>

<body>

<main>
  <h1>10,000 ARROWS</h1>

  <div class="row">

    <!-- LEFT: Haiku (always present) -->
    <section class="card haiku-card">
      <div class="title"><span>Haiku</span></div>
      <div class="divider"></div>

      <iframe
        class="embed"
        id="currentFrame"
        src=""
        title="Current Entry">
      </iframe>
    </section>

    <!-- RIGHT: Hall links only -->
    <aside class="card control-card">
      <div class="title"><span>The Hall</span></div>
      <div class="divider"></div>

      <nav class="hall-links">
        <a href="/explore/">Explore the Hall</a>
        <a href="/about/">About the Hall</a>
      </nav>
    </aside>

  </div>
</main>

<footer class="footer">
  <a href="/explore/">Explore the Hall</a>
  <a href="/about/">About the Hall</a>
</footer>

<script>
/* Minimal haiku loader: newest entry only */

function cmpDesc(a,b){
  return b.id.localeCompare(a.id);
}

function initHall(){
  const items = (window.HAIKU_ALL || []);
  const frame = document.getElementById('currentFrame');

  if (!frame) return;

  if (items.length > 0){
    const newest = items.slice().sort(cmpDesc)[0];
    frame.src = "./" + newest.path_html + "?embed=1";
  } else {
    frame.outerHTML =
      '<div style="opacity:.7; text-align:center; padding:.75rem;">No entries.</div>';
  }
}

document.addEventListener("manifestLoaded", initHall);
</script>

</body>
</html>
